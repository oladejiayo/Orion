# ============================================================================
# Docker Compose Overrides
#
# Used when running inside Docker (container-to-container networking).
# Service names resolve via Docker DNS on the orion-network bridge.
# Activate: SPRING_PROFILES_ACTIVE=docker (set in docker-compose.yml)
# ============================================================================

server:
  port: 8080

# --- Database (US-01-10): PostgreSQL via Docker network ---
spring:
  datasource:
    url: jdbc:postgresql://postgres:5432/orion
    username: orion
    password: ${DB_PASSWORD:orion_dev_password}
  jpa:
    hibernate:
      ddl-auto: validate

# --- Flyway multi-database (US-01-10) ---
orion:
  flyway:
    orion:
      url: jdbc:postgresql://postgres:5432/orion
      username: orion
      password: ${DB_PASSWORD:orion_dev_password}
      locations: classpath:db/migration/orion
      enabled: true

# --- Future: Kafka (uncomment when implementing event bus â€” US-05-xx) ---
# spring:
#   kafka:
#     bootstrap-servers: redpanda:9092

orion:
  service:
    name: service-template
    environment: docker

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
  endpoint:
    health:
      show-details: always

logging:
  level:
    root: INFO
    com.orion: INFO
